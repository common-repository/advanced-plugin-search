var klick_aps_send_command=function(a,s,n,i){i="undefined"==typeof i||i;var e={action:"klick_aps_ajax",subaction:a,nonce:klick_aps_ajax_nonce,data:s};jQuery.post(ajaxurl,e,function(a){if(i)try{var s=JSON.parse(a)}catch(e){return}else var s=a;"undefined"!=typeof n&&n(s)})};jQuery(document).ready(function(a){klick_aps=klick_aps(klick_aps_send_command),aps_clicked=!1,a("#klick_aps_plugin_data").change(function(s){a("#aps_create_db").prop("disabled",!1)}),a("#aps_create_db").click(function(a){aps_clicked||(aps_clicked=!0)}),a("#aps_find_my_plugins").click(function(s){aps_clicked||(aps_clicked=!0,a("#page_number").val(1))}),a("#aps_next_page").click(function(s){aps_clicked||(aps_clicked=!0,a("#page_number").val(parseInt(a("#page_number").val())+1))}),a("#klick_aps_go_to_last").click(function(s){aps_clicked||(aps_clicked=!0,a("#page_number").val(a("#total_pages").val()))}),a("#aps_prev_page").click(function(s){aps_clicked||(aps_clicked=!0,a("#page_number").val(parseInt(a("#page_number").val())-1))}),a("#klick_aps_go_to_first").click(function(s){aps_clicked||(aps_clicked=!0,a("#page_number").val(1))}),1!=klick_aps_admin.advanced_search_toggle&&a(".klick-aps-advanceform").addClass("disabled")});var klick_aps=function(a){function s(){var a=r(".klick-aps-form-wrapper form").serialize();return a}function n(s,i,t,c){var _="remaining_plugins="+i+"&page_count="+t;a("klick_aps_build_plugin_table",_,function(a){parseInt(a.status.remaining_plugins)>0?(i=parseInt(a.status.remaining_plugins),success=a.status.success,success?t++:t++,status=parseInt((c+s-i)/s*100),status=Math.min(100,status),e(status),n(s,i,t,c)):window.location.replace(klick_aps_admin.aps_tab_url)})}function i(){r(".downloaded-plugin-status").css("display","block"),r(".downloaded-plugin-status").find("span").css("display","block"),r(".plugin-status-lebel").html("0%"),r(".downloaded-plugin-status").find("span").css("width","0%"),r(".downloaded-plugin-status").find("span").css("background","#F5821F")}function e(a){var a=a;r(".plugin-status-lebel").html(Math.ceil(a)+"%"),r(".downloaded-plugin-status").css("height","27px"),r(".downloaded-plugin-status").find("span").css("width",a+"%"),r(".downloaded-plugin-status").find("span").css("background","#F5821F")}function t(a,s){r(""+a).addClass("klick-notice-message notice notice-error is-dismissible"),r(""+a).html("<p>"+s+"</p>"),r(""+a).slideDown(),r("#aps_find_my_plugins").attr("disabled","disabled")}function c(a){r(""+a).slideUp()}function _(a){return!/^[0-9]+$/.test(a)}function l(a){return a.length<1}function d(a){return a>100}var r=jQuery;r("#msg_area").hide(),r("#klick_aps_advanced_Save").attr("disabled","disabled"),r(".klick-aps-advance-search-toggle").change(function(){r("#klick_aps_advanced_Save").prop("disabled",!1)}),r("#current-page-selector").keyup(function(){r("#page_number").val(r(this).val())}),r("#klick_aps_nav_tab_wrapper .nav-tab").click(function(a){a.preventDefault();var s=r(this).attr("id");if(s&&"klick_aps_nav_tab_"==s.substring(0,18)){var s=s.substring(18);r("#klick_aps_nav_tab_wrapper .nav-tab:not(#klick_aps_nav_tab_"+s+")").removeClass("nav-tab-active"),r(this).addClass("nav-tab-active"),r(".klick-aps-nav-tab-contents:not(#klick_aps_nav_tab_contents_"+s+")").hide(),r("#klick_aps_nav_tab_contents_"+s).show()}}),r("#klick_aps_advanced_Save").click(function(){var n=s();a("klick_aps_save_settings",n,function(a){r(".klick-notice-message").html(a.status.messages),r(".fade").delay(2e3).slideUp(200,function(){r("#klick_aps_advanced_Save").prop("disabled","disabled")})})}),r("#aps_create_db").click(function(a){a.preventDefault(),r(this).prop("disabled","disabled");var s=240,t=parseInt(r("#klick_aps_plugin_data").val()),c=1;i(),e(s/t*100),n(t,t,c,s)}),r(".aps-form").change(function(a){c("#msg_area"),r("#aps_find_my_plugins").attr("disabled",!1)}),r("#plugin-filter").submit(function(){var a=r.trim(r("#avg_ratings").val());if(l(a)===!0)r("#avg_ratings").val("0");else{if(_(a)===!0)return t("#msg_area",klick_aps_admin.notice_for_avg_ratings),!1;if(d(a)===!0)return t("#msg_area",klick_aps_admin.notice_for_avg_ratings),!1}var s=r.trim(r("#active_installs").val());if(l(s)===!0)r("#active_installs").val("0");else if(_(s)===!0)return t("#msg_area",klick_aps_admin.notice_for_active_installs),!1;var n=r.trim(r("#num_of_screenshots").val());if(l(n)===!0)r("#num_of_screenshots").val("0");else{if(_(n)===!0)return t("#msg_area",klick_aps_admin.notice_for_screenshots),!1;if(d(n)===!0)return t("#msg_area",klick_aps_admin.notice_for_avg_ratings),!1}var i=r.trim(r("#downloaded").val());if(l(i)===!0)r("#downloaded").val("0");else if(_(i)===!0)return t("#msg_area",klick_aps_admin.notice_for_downloaded),!1;return!0})};